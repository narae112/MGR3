<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default}">
<head>
    <title>주문 목록</title>
    <!-- 부트스트랩 CDN 링크 추가 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<th:block layout:fragment="css">
    <style>
        .content-mg{
            margin-left:20%;
            margin-right:20%;
            margin-top:2%;
            margin-bottom:100px;
        }
        .repImgDiv{
            margin-right:15px;
            margin-left:15px;
            height:auto;
        }
        .repImg{
            height:100px;
            width:100px;
        }
        .fs18{
            font-size:18px
        }
        .fs24{
            font-size:24px
        }
    </style>
</th:block>
<body>
<div layout:fragment="content" class="content-mg">
    <h1>결제 내역</h1>

    <!-- 주문 목록 출력 -->
    <div th:if="${paging.empty}">
        <p>결제 내역이 없습니다.</p>
    </div>
    <div th:if="${not paging.empty}">
        <div th:each="orderListDto : ${paging.content}">
            <div>
                <h3 th:text="${#temporals.format(orderListDto.orderDate, 'yyyy. MM. dd')}"></h3>
                <hr/>
                <p th:text="'주문번호 ' + ${orderListDto.orderNum}"></p>
                <hr/>
            </div>
            <div th:each="orderTicketDto : ${orderListDto.orderTickets}">
                <p th:text="'방문 예정일 : ' + ${#temporals.format(orderTicketDto.visitDate, 'yyyy. MM. dd')}"></p>
                <h4 th:text="'[' + ${orderTicketDto.locationCategory.displayName} + '점] ' + ${orderTicketDto.name}"></h4>
                <h5 th:text="${#numbers.formatInteger(orderTicketDto.totalPrice, 0, 'COMMA')} + '원'"></h5>
                <p th:text="'성인 티켓 ' + ${#numbers.formatInteger(orderTicketDto.adultPrice, 0, 'COMMA')} + '원 ' +
                            ${orderTicketDto.adultCount} + '장&nbsp;&nbsp;|&nbsp;&nbsp;아동 티켓 ' + ${#numbers.formatInteger(orderTicketDto.childPrice, 0, 'COMMA')} +
                            '원 ' + ${orderTicketDto.childCount} + '장'"></p>
                <hr/>
            </div>

        </div>

        <!-- 이전 버튼 -->
        <div th:if="${paging.hasPrevious()}">
            <!-- 부트스트랩 클래스 적용 -->
            <a th:href="@{'/member/orderList/' + ${paging.number - 1}}"
               class="btn btn-primary">이전</a>
        </div>

        <!-- 다음 버튼 -->
        <div th:if="${paging.hasNext()}">
            <!-- 부트스트랩 클래스 적용 -->
            <a th:href="@{'/member/orderList/' + ${paging.number + 1}}"
               class="btn btn-primary">다음</a>
        </div>

        <!-- 페이징 정보 출력 -->
        <div>
            <span>총 페이지 수: <span th:text="${paging.totalPages}"></span></span>
            <span>현재 페이지: <span th:text="${paging.number + 1}"></span></span>
            <span>총 항목 수: <span th:text="${paging.totalElements}"></span></span>
        </div>
    </div>
</div>
</body>
</html>
